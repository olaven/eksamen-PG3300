@startuml Class diagram 



namespace item {
    interface Item {
        + <<Property>> Name : String 
        + <<Property>> Owner : Person 
        ~ getPrice() : float
        ~ getCondition() : String
        ~ getDamage() : String
        ~ getModification() : String
        ~ getInformation() : String 
    }

    Item o-- "1" FleaMarket.Person 

    class ConcreteItem implements Item {
        / Name : String 
    }


    abstract ItemDecorator implements Item {
        - item : Item
        # random : Random  
    }

    ItemDecorator "1" o-- Item 


    class PerfectConditionItemDecorator extends ItemDecorator
    class NoDamageItemDecorator extends ItemDecorator
    class WithWingsModificationItemDecorator extends ItemDecorator

    note "More in implementation" as MoreInImplementation
    MoreInImplementation .. ItemDecorator


    enum Decoration {
        NoDamage,
        PerfectCondition,
        WithWings, 
    }

    ItemFactory -- Decoration : uses 

    class ItemFactory {
        + getNew : Item  
    }

    ItemFactory -- Item : creates 
}

namespace FleaMarket {
    

    class Wallet {
        + <<Property>> Balance : float 
        + Wallet ()
    }

    abstract Person {
        + <<Property>> name : String 
        # wallet : Wallet 
        # items : List<Item> 
        + act : void 
    }

    Wallet "1" *-- Person
    Person -- Market : trades 


    class Customer extends Person {
        / act : void 
    }

    class Salesman extends Person {
        / act void 
    }

    class PersonFactory {
        + 
    }

    note "Singleton" as singleton
    class Market {
        
        - _market : Market
        - _items : List<IItem>
        + EvenHappening : EventHandler
        - _staticLock : object
        - Padlock : object
        + <<Property>> Instance : Market  
        + addForSale(item : Item) : void  
        + sellItem(item : Item) : void 
        + Market()
    }

    Market .. singleton


    class Program { 
        + main() : void
        + <<Property>> Wallet : Wallet
        + <<Property>> string : Name
    }

    class Simulation {
        - _random : Random
        - _saleCount int
        - _customers : List<Customer> 
        - _salesmen : List<Salesman> 
        ~ run() : void 
        - Simulation(saleCount : int)
        - GetRandomSellers(): Salesman
        - GiveItemsTo(persons : IEnumerable<Person>): void
        
    }

    Program -- "1" Simulation : starts
    Simulation o-- "*" Market

    note "Legg in Flyweight pattern!" as flnote


    Salesman -- ItemFactory : gets something to sell 

}


@enduml